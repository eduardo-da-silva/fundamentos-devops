
<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Eduardo da Silva">
      
      
        <link rel="canonical" href="https://eduardo-da-silva.github.io/fundamentos-devops/containers/">
      
      
        <link rel="prev" href="../ci/">
      
      
        <link rel="next" href="../docker/">
      
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Contêineres - Fundamentos de DevOps</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#conteineres" class="md-skip">
          Pular para conteúdo
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabeçalho">
    <a href=".." title="Fundamentos de DevOps" class="md-header__button md-logo" aria-label="Fundamentos de DevOps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Fundamentos de DevOps
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Contêineres
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Buscar" placeholder="Buscar" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Pesquisar">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Compartilhar" aria-label="Compartilhar" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Limpar" aria-label="Limpar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando busca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/eduardo-da-silva/fundamentos-devops" title="Ir para repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    eduardo-da-silva/fundamentos-devops
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navegação" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Fundamentos de DevOps" class="md-nav__button md-logo" aria-label="Fundamentos de DevOps" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Fundamentos de DevOps
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/eduardo-da-silva/fundamentos-devops" title="Ir para repositório" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    eduardo-da-silva/fundamentos-devops
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introdução
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../collaboration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gestão de repositórios e colaboração
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ci/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integração Contínua
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Contêineres
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Contêineres
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fundamentos-dos-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      Fundamentos dos contêineres
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fundamentos dos contêineres">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#o-que-sao-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      O que são contêineres?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#por-que-usar-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      Por que usar contêineres?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bare-metal-vs-virtualizacao-vs-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      Bare Metal vs Virtualização vs Contêineres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-container-initiative-oci" class="md-nav__link">
    <span class="md-ellipsis">
      Open Container Initiative (OCI)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#as-tecnologias-que-dao-vida-aos-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      As tecnologias que dão vida aos contêineres
    </span>
  </a>
  
    <nav class="md-nav" aria-label="As tecnologias que dão vida aos contêineres">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    <span class="md-ellipsis">
      Namespaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criando-um-ambiente-isolado-com-namespace" class="md-nav__link">
    <span class="md-ellipsis">
      Criando um ambiente isolado com namespace
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cgroups-ou-control-groups" class="md-nav__link">
    <span class="md-ellipsis">
      CGroups (ou Control Groups)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#criando-um-ambiente-isolado-com-cgroups" class="md-nav__link">
    <span class="md-ellipsis">
      Criando um ambiente isolado com cgroups
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Criando um ambiente isolado com cgroups">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fazendo-um-teste-de-stress" class="md-nav__link">
    <span class="md-ellipsis">
      Fazendo um teste de stress
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../orquestracao/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Orquestração
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Entrega Contínua
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../iac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Infraestrutura como Código
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Índice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Índice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fundamentos-dos-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      Fundamentos dos contêineres
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fundamentos dos contêineres">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#o-que-sao-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      O que são contêineres?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#por-que-usar-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      Por que usar contêineres?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bare-metal-vs-virtualizacao-vs-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      Bare Metal vs Virtualização vs Contêineres
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-container-initiative-oci" class="md-nav__link">
    <span class="md-ellipsis">
      Open Container Initiative (OCI)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#as-tecnologias-que-dao-vida-aos-conteineres" class="md-nav__link">
    <span class="md-ellipsis">
      As tecnologias que dão vida aos contêineres
    </span>
  </a>
  
    <nav class="md-nav" aria-label="As tecnologias que dão vida aos contêineres">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#namespaces" class="md-nav__link">
    <span class="md-ellipsis">
      Namespaces
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criando-um-ambiente-isolado-com-namespace" class="md-nav__link">
    <span class="md-ellipsis">
      Criando um ambiente isolado com namespace
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cgroups-ou-control-groups" class="md-nav__link">
    <span class="md-ellipsis">
      CGroups (ou Control Groups)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#criando-um-ambiente-isolado-com-cgroups" class="md-nav__link">
    <span class="md-ellipsis">
      Criando um ambiente isolado com cgroups
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Criando um ambiente isolado com cgroups">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fazendo-um-teste-de-stress" class="md-nav__link">
    <span class="md-ellipsis">
      Fazendo um teste de stress
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="conteineres">Contêineres<a class="headerlink" href="#conteineres" title="Permanent link">&para;</a></h1>
<p>Nesta seção, abordaremos os conceitos básicos de containers, sem entrar nos detalhes de uso dos famosos Docker e Kubernetes. Vamos nos concentrar nos conceitos fundamentais e na importância dos containers no desenvolvimento de software moderno.</p>
<h2 id="fundamentos-dos-conteineres">Fundamentos dos contêineres<a class="headerlink" href="#fundamentos-dos-conteineres" title="Permanent link">&para;</a></h2>
<p>O uso de <code>containers</code> (ou contêineres) é uma prática comum no desenvolvimento de software moderno, permitindo que os desenvolvedores criem, testem e implantem aplicativos de forma consistente em diferentes ambientes. Os containers são unidades leves e portáteis que empacotam o código-fonte, bibliotecas e dependências necessárias para executar um aplicativo, garantindo que ele funcione da mesma forma em qualquer lugar.</p>
<p>De forma resumida, um contêiner é um ambiente completo, composto por uma aplicação e todas suas dependências, bibliotecas, binários, arquivos de configuração, em um único pacote. Os containers são baseados na tecnologia de virtualização, mas diferentemente das máquinas virtuais, que virtualizam todo o sistema operacional, os containers compartilham o mesmo núcleo do sistema operacional host. Isso torna os containers mais leves e rápidos de iniciar, além de permitir que vários containers sejam executados simultaneamente em um único host.</p>
<p>Ao criar um contêiner para uma aplicação e suas dependências, as diferenças entre distribuições de sistemas operacionais e camadas inferiores da infraestrutura são abstraídas. Com isso, os desenvolvedores podem se concentrar em escrever código e aplicações, sem se preocupar com as diferenças entre os ambientes de desenvolvimento, teste e produção.</p>
<h3 id="o-que-sao-conteineres">O que são contêineres?<a class="headerlink" href="#o-que-sao-conteineres" title="Permanent link">&para;</a></h3>
<p>Os contêineres são unidades de software que empacotam o código-fonte, bibliotecas e dependências necessárias para executar um aplicativo. Eles são isolados uns dos outros e do sistema operacional host, o que significa que cada contêiner pode ter suas próprias configurações e dependências, sem interferir em outros contêineres ou no sistema operacional subjacente.</p>
<p>Os contêineres são ambientes de leves, portáteis, consistentes e isolados que permitem aos desenvolvedores executar e empacotar aplicativos com suas dependências de forma consistente em diferentes plataformas. Eles ajudam a simplificar os processos de desenvolvimento, implantação e gerenciamento de aplicativos, garantindo que os aplicativos sejam executados de forma consistente, independentemente da infraestrutura subjacente.</p>
<h3 id="por-que-usar-conteineres">Por que usar contêineres?<a class="headerlink" href="#por-que-usar-conteineres" title="Permanent link">&para;</a></h3>
<p>Os contêineres oferecem várias vantagens em relação aos métodos tradicionais de desenvolvimento e implantação de aplicativos. Algumas das principais razões para usar contêineres incluem:</p>
<ul>
<li><strong>Consistência</strong>: Os contêineres garantem que o aplicativo funcione da mesma forma em diferentes ambientes, eliminando problemas de "funciona na minha máquina". Isso é especialmente útil quando se trabalha em equipes grandes ou em projetos complexos.</li>
<li><strong>Portabilidade</strong>: Os contêineres podem ser executados em qualquer lugar, desde o laptop do desenvolvedor até servidores em nuvem ou ambientes de produção. Isso facilita a migração de aplicativos entre diferentes ambientes e plataformas.</li>
<li><strong>Isolamento</strong>: Os contêineres são isolados uns dos outros, o que significa que as dependências e configurações de um contêiner não afetam outros contêineres ou o sistema operacional host. Isso ajuda a evitar conflitos de dependência e facilita o gerenciamento de aplicativos complexos.</li>
<li><strong>Eficiência</strong>: Os contêineres são mais leves e rápidos de iniciar do que as máquinas virtuais, permitindo que vários contêineres sejam executados simultaneamente em um único <code>host</code>. Isso reduz o uso de recursos e melhora a eficiência geral do sistema.</li>
<li><strong>Escalabilidade</strong>: Os contêineres podem ser facilmente escalados para atender à demanda, permitindo que os desenvolvedores aumentem ou diminuam rapidamente a capacidade de um aplicativo conforme necessário. Isso é especialmente útil em ambientes de produção, onde a carga de trabalho pode variar significativamente.</li>
<li><strong>Facilidade de gerenciamento</strong>: Os contêineres podem ser facilmente gerenciados e orquestrados usando ferramentas como Docker e Kubernetes, permitindo que os desenvolvedores automatizem tarefas comuns, como implantação, escalonamento e monitoramento de aplicativos.</li>
</ul>
<p>Os contêineres resolvem o problema de ambientes inconsistentes ao trabalhar em grandes equipes. Antes dos contêineres ou ambientes virtuais, muitos problemas e perda de tempo eram causados pela necessidade de instalar e configurar ambientes locais para construir projetos compartilhados por colegas de trabalho ou amigos.</p>
<p>Dessa forma, os contêineres ajudam a reduzir o tempo de desenvolvimento e a aumentar a eficiência, permitindo que os desenvolvedores se concentrem no que realmente importa: escrever código e criar aplicativos incríveis. Ainda, de forma geral, o uso de contêineres ajudar a reduzir os conflitos entre as equipes de desenvolvimento e operações, separando as áreas de responsabilidade. Os desenvolvedores podem se concentrar em seus aplicativos e as equipes de operações podem se concentrar na infraestrutura. E, como os contêineres são baseados em tecnologia de código aberto, você obtém os mais recentes avanços assim que estão disponíveis.</p>
<p>Embora o Docker possa ser a ferramenta de contêiner mais conhecida, existem outras opções disponíveis, como Podman, Skopeo, Buildah e CRI-O. Essas ferramentas oferecem funcionalidades semelhantes ao Docker, mas podem ter diferenças em termos de arquitetura, desempenho e recursos específicos.</p>
<h3 id="bare-metal-vs-virtualizacao-vs-conteineres">Bare Metal vs Virtualização vs Contêineres<a class="headerlink" href="#bare-metal-vs-virtualizacao-vs-conteineres" title="Permanent link">&para;</a></h3>
<p><code>Bare Metal</code> é um termo usado para descrever um computador que está executando diretamente no hardware sem nenhuma virtualização. Esta é a maneira com maior desempenho para executar um aplicativo, mas também é a menos flexível. Você só pode executar um aplicativo por servidor e não pode mover facilmente o aplicativo para outro servidor.</p>
<p>Para resolver esse problema, a virtualização foi introduzida. A virtualização permite que você execute vários sistemas operacionais em um único servidor. A cada uma dessas instâncias de sistema operacional é chamada de máquina virtual (VM). Cada VM é executada em cima de um hipervisor, que é um pedaço de software que emula o hardware de um computador. O hipervisor permite que você execute vários sistemas operacionais em um único servidor e também fornece isolamento entre aplicativos executados em diferentes VMs.</p>
<p>Isso é possível porque o hipervisor emula o hardware de um computador, permitindo que cada VM tenha seu próprio sistema operacional e recursos. Em linhas gerais, o hipervisor <code>engana</code> o sistema operacional convidado (VM) para pensar que está executando em um hardware físico, quando na verdade está sendo executado em cima de outro sistema operacional (o hipervisor). No entanto, isso pode levar a uma sobrecarga de desempenho, pois o hipervisor precisa gerenciar os recursos do hardware subjacente e alocar esses recursos para cada VM. Além disso, o hipervisor pode introduzir latência e reduzir o desempenho geral do sistema.</p>
<p>Já os contêineres são uma maneira de executar vários aplicativos em um único servidor sem a sobrecarga de um hipervisor. Cada contêiner é executado em cima de um mecanismo de contêiner (software que gerencia o ciclo de vida dos contêineres), que supervisiona e isola processos usando os recursos do núcleo do sistema operacional host.</p>
<p>Dessa forma, os contêineres compartilham o mesmo núcleo do sistema operacional host, mas cada contêiner tem seu próprio sistema de arquivos, rede e processos. Isso significa que os contêineres são mais leves e rápidos de iniciar do que as VMs, pois não precisam emular todo o hardware de um computador. Além disso, os contêineres podem ser facilmente movidos entre diferentes servidores e ambientes, tornando-os mais portáteis e flexíveis. Por outro lado, como todos os contêineres usam o mesmo núcleo do sistema operacionais, não é possível que cada contêiner tenha seu próprio sistema operacional. Isso pode levar a problemas de compatibilidade entre aplicativos que exigem diferentes versões do núcleo do sistema operacional.</p>
<h3 id="open-container-initiative-oci">Open Container Initiative (OCI)<a class="headerlink" href="#open-container-initiative-oci" title="Permanent link">&para;</a></h3>
<p>A Open Container Initiative (OCI) é uma organização que visa criar padrões abertos para contêineres. A OCI foi criada em 2015 como parte da Linux Foundation e tem como objetivo promover a interoperabilidade entre diferentes ferramentas e plataformas de contêineres.</p>
<p>A OCI define dois padrões principais:</p>
<ul>
<li><strong>Runtime Specification</strong>: Define como os contêineres devem ser executados em um ambiente de contêiner. Isso inclui detalhes sobre como os contêineres devem ser iniciados, parados e gerenciados, bem como como os recursos do sistema devem ser alocados para os contêineres.</li>
<li><strong>Image Specification</strong>: Define como as imagens de contêiner devem ser formatadas e armazenadas. Isso inclui detalhes sobre como as imagens devem ser empacotadas, versionadas e distribuídas.</li>
</ul>
<p>Esses padrões ajudam a garantir que diferentes ferramentas e plataformas de contêineres possam trabalhar juntas de forma interoperável. Isso significa que os desenvolvedores podem usar diferentes ferramentas para criar, executar e gerenciar contêineres, sem se preocupar com problemas de compatibilidade.</p>
<p>A Docker foi uma das primeiras empresas a adotar os padrões da OCI e tem trabalhado em estreita colaboração com a OCI para promover a interoperabilidade entre diferentes ferramentas de contêineres. Outras empresas, como Red Hat, Google e Microsoft, também estão envolvidas na OCI e apoiam seus esforços para criar padrões abertos para contêineres.</p>
<h2 id="as-tecnologias-que-dao-vida-aos-conteineres">As tecnologias que dão vida aos contêineres<a class="headerlink" href="#as-tecnologias-que-dao-vida-aos-conteineres" title="Permanent link">&para;</a></h2>
<p>O conceito de contêineres é suportado por várias tecnologias que permitem a criação, execução e gerenciamento de contêineres. Entre essas tecnologias, podemos citar as duas principais, que são:</p>
<ul>
<li><strong>Namespaces</strong>: Os namespaces são uma característica do núcleo do Linux que permite isolar processos e recursos em diferentes contêineres. Cada contêiner tem seu próprio namespace, o que significa que os processos em um contêiner não podem ver ou interagir com os processos em outro contêiner.</li>
<li><strong>Cgroups</strong>: Os cgroups (control groups) são outra característica do núcleo do Linux que permite limitar e monitorar o uso de recursos (como CPU, memória e disco) por processos em um contêiner. Isso ajuda a garantir que os contêineres não consumam mais recursos do que o necessário e permite que os desenvolvedores definam limites para cada contêiner.</li>
</ul>
<p>Outras tecnologias também são importantes para o funcionamento dos contêineres, como:</p>
<ul>
<li><strong>UnionFS</strong>: O UnionFS é um sistema de arquivos que permite empilhar vários sistemas de arquivos em um único sistema de arquivos. Isso é útil para criar imagens de contêiner, pois permite que os desenvolvedores empilhem diferentes camadas de arquivos e dependências em uma única imagem.</li>
<li><strong>Containerd</strong>: O Containerd é um daemon de contêiner que fornece uma API para criar, executar e gerenciar contêineres. Ele é usado por várias ferramentas de contêiner, incluindo o Docker, e fornece uma interface comum para trabalhar com contêineres.</li>
<li><strong>runc</strong>: O runc é um runtime de contêiner que implementa os padrões da OCI. Ele é usado pelo Docker e outras ferramentas de contêiner para executar contêineres. O runc é responsável por criar e gerenciar os namespaces, cgroups e sistemas de arquivos necessários para executar um contêiner.</li>
</ul>
<h3 id="namespaces">Namespaces<a class="headerlink" href="#namespaces" title="Permanent link">&para;</a></h3>
<p>Os namespaces são uma característica do núcleo do Linux que permite isolar processos e recursos em diferentes contêineres. Cada contêiner tem seu próprio namespace, o que significa que os processos em um contêiner não podem ver ou interagir com os processos em outro contêiner. Isso é fundamental para garantir o isolamento entre contêineres e evitar conflitos de dependência.</p>
<p>Os namespaces são usados para isolar diferentes recursos do sistema, como:</p>
<ul>
<li><strong>PID namespace</strong>: Isola os IDs de processo (PIDs) entre contêineres, permitindo que cada contêiner tenha seu próprio conjunto de processos.</li>
<li><strong>Network namespace</strong>: Isola as interfaces de rede entre contêineres, permitindo que cada contêiner tenha sua própria pilha de rede e endereços IP.</li>
<li><strong>Mount namespace</strong>: Isola os pontos de montagem entre contêineres, permitindo que cada contêiner tenha seu próprio sistema de arquivos.</li>
<li><strong>User namespace</strong>: Isola os IDs de usuário e grupo entre contêineres, permitindo que cada contêiner tenha seu próprio conjunto de usuários e permissões.</li>
<li><strong>IPC namespace</strong>: Isola os recursos de comunicação entre processos (IPC) entre contêineres, permitindo que cada contêiner tenha seu próprio conjunto de recursos IPC.</li>
<li><strong>UTS namespace</strong>: Isola os nomes de host e domínio entre contêineres, permitindo que cada contêiner tenha seu próprio nome de host e domínio.</li>
<li><strong>Cgroup namespace</strong>: Isola os grupos de controle (cgroups) entre contêineres, permitindo que cada contêiner tenha seu próprio conjunto de cgroups.</li>
<li><strong>Time namespace</strong>: Isola o tempo entre contêineres, permitindo que cada contêiner tenha seu próprio relógio e fuso horário.</li>
<li><strong>Seccomp namespace</strong>: Isola os filtros de segurança entre contêineres, permitindo que cada contêiner tenha seu próprio conjunto de regras de segurança.</li>
</ul>
<p>A imagem abaixo ilustra como esses recurso estão isolados dentro de um namespace:</p>
<pre class="mermaid"><code>flowchart LR
  subgraph Namespace
    PID
    NET
    MNT
    USER
    IPC
    UTS
  end</code></pre>
<h3 id="criando-um-ambiente-isolado-com-namespace">Criando um ambiente isolado com namespace<a class="headerlink" href="#criando-um-ambiente-isolado-com-namespace" title="Permanent link">&para;</a></h3>
<p>No Linux, você pode criar um ambiente isolado usando namespaces com o comando <code>unshare</code>. O comando <code>unshare</code> permite que você execute um comando em um novo namespace, isolando-o do restante do sistema. Isso é útil para testar e desenvolver aplicativos em um ambiente isolado.</p>
<p>Neste exemplo, criaremos um novo namespace de PID, rede e sistema de montagem, e iniciaremos um bash dentro desse ambiente isolado.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>unshare<span class="w"> </span>-p<span class="w"> </span>-m<span class="w"> </span>-n<span class="w"> </span>-f<span class="w"> </span>--mount-proc<span class="w"> </span>bash
</span></code></pre></div>
<p>Vamos analisar os parâmetros usados:</p>
<ul>
<li><code>-p</code>: Cria um novo namespace de PID, onde os processos terão IDs independentes do sistema principal.</li>
<li><code>-m</code>: Cria um novo namespace de montagem, isolando o sistema de arquivos.</li>
<li><code>-n</code>: Cria um novo namespace de rede, isolando as interfaces de rede.</li>
<li><code>-f</code>: Força a criação do novo processo no namespace.</li>
<li><code>--mount-proc</code>: Monta o sistema de arquivos <code>/proc</code> dentro do namespace, permitindo visualizar apenas os processos do ambiente isolado.</li>
<li><code>bash</code>: O comando a ser executado dentro do novo namespace.</li>
</ul>
<p>Após executar o comando, você terá um shell bash dentro de um novo namespace de PID, rede e sistema de montagem. Isso significa que qualquer processo iniciado dentro desse shell não terá acesso aos processos ou recursos do sistema principal.</p>
<p>Da parte externa do namespace, você pode verificar os processos em execução usando o comando <code>ps</code>. Nesse caso, queremos identificar o PID do bash que foi iniciado dentro do namespace. Para isso, você pode usar o comando <code>ps</code> com a opção <code>-ef</code> para listar todos os processos em execução:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="w"> </span>ps<span class="w"> </span>-ef<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>unshare
</span></code></pre></div>
<p>Com esse comando, você verá uma lista de processos em execução e poderá identificar o PID do processo <code>unshare</code>. O PID do bash iniciado dentro do namespace será um filho desse processo. Uma forma de visualizar isso é usando o comando <code>pstree</code>, que exibe a árvore de processos:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>pstree<span class="w"> </span>-p<span class="w"> </span>&lt;PID_IDENTIFICADO_AO_COMANDO_UNSHARE&gt;<span class="w"> </span><span class="c1"># (1)</span>
</span></code></pre></div>
<ol>
<li>Substitua <code>&lt;PID_IDENTIFICADO_AO_COMANDO_UNSHARE&gt;</code> pelo PID do processo <code>unshare</code> que você encontrou na etapa anterior. O PID do bash será listado como um filho do processo <code>unshare</code>.</li>
</ol>
<h2 id="cgroups-ou-control-groups">CGroups (ou Control Groups)<a class="headerlink" href="#cgroups-ou-control-groups" title="Permanent link">&para;</a></h2>
<p>Os cgroups (control groups) são uma característica do núcleo do Linux que permite limitar e monitorar o uso de recursos (como CPU, memória e disco) por processos em um contêiner. Isso ajuda a garantir que os contêineres não consumam mais recursos do que o necessário e permite que os desenvolvedores definam limites para cada contêiner.</p>
<p>Os cgroups são organizados em hierarquias, onde cada hierarquia pode conter vários grupos de controle. Cada grupo de controle pode ter suas próprias configurações de limite de recursos, permitindo que os desenvolvedores definam diferentes limites para diferentes grupos de processos.</p>
<p>Os cgroups são usados para controlar o uso de recursos em várias áreas, incluindo:</p>
<ul>
<li><strong>Limitação de CPU</strong>: Permite definir limites de uso de CPU para grupos de processos, garantindo que um contêiner não consuma mais CPU do que o necessário.</li>
<li><strong>Limitação de memória</strong>: Permite definir limites de uso de memória para grupos de processos, garantindo que um contêiner não consuma mais memória do que o necessário.</li>
<li><strong>Limitação de disco</strong>: Permite definir limites de uso de disco para grupos de processos, garantindo que um contêiner não consuma mais espaço em disco do que o necessário.</li>
<li><strong>Limitação de rede</strong>: Permite definir limites de uso de rede para grupos de processos, garantindo que um contêiner não consuma mais largura de banda do que o necessário.</li>
<li><strong>Limitação de I/O</strong>: Permite definir limites de uso de entrada/saída (I/O) para grupos de processos, garantindo que um contêiner não consuma mais recursos de I/O do que o necessário.</li>
</ul>
<p><pre class="mermaid"><code>flowchart LR
  subgraph CGroup
    CPU
    cpuset
    memory
    device
    I/O
    network
  end</code></pre>
Os cgroups são uma parte fundamental da tecnologia de contêineres, pois permitem que os desenvolvedores definam limites e monitorem o uso de recursos em contêineres. Isso é especialmente importante em ambientes de produção, onde vários contêineres podem estar sendo executados simultaneamente e o uso excessivo de recursos por um contêiner pode afetar o desempenho de outros contêineres ou do sistema host.
Por isso, junto com os namespaces, os cgroups são fundamentais para garantir o isolamento e o controle de recursos em contêineres. Eles permitem que os desenvolvedores definam limites e monitorem o uso de recursos, garantindo que os contêineres não afetem o desempenho do sistema host ou de outros contêineres.</p>
<h2 id="criando-um-ambiente-isolado-com-cgroups">Criando um ambiente isolado com cgroups<a class="headerlink" href="#criando-um-ambiente-isolado-com-cgroups" title="Permanent link">&para;</a></h2>
<p>Nós vamos limitar os recursos do namespace criado anteriormente e, em seguida, rodar um teste de estresse para verificar se os limites estão funcionando corretamente.</p>
<p>Inicialmente, vamos criar alguns arquivos com as definições do cgroup que iremos associar ao processo bash que criamos anteriormente. Para isso, vamos criar um diretório para o cgroup e configurar os limites de CPU e memória.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo<span class="w"> </span>mkdir<span class="w"> </span>/sys/fs/cgroup/meu-namespace<span class="w"> </span><span class="c1"># (1)</span>
</span></code></pre></div>
<ol>
<li>O nome <code>meu-namespace</code> pode ser alterado para qualquer nome que você preferir. O importante é que o diretório seja criado dentro de <code>/sys/fs/cgroup/</code>, que é onde os cgroups são montados no sistema.</li>
</ol>
<p>Agora vamos limitar os recursos do cgroup. Para isso, vamos criar dois arquivos: <code>cpu.max</code> e <code>memory.max</code>. O arquivo <code>cpu.max</code> define o limite de uso de CPU, enquanto o arquivo <code>memory.max</code> define o limite de uso de memória.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;50000 100000&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/sys/fs/cgroup/meu-namespace/cpu.max<span class="w"> </span><span class="c1"># (1)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;100M&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/sys/fs/cgroup/meu-namespace/memory.max<span class="w"> </span><span class="c1"># (2)</span>
</span></code></pre></div>
<ol>
<li>O valor <code>50000 100000</code> significa que o cgroup pode usar até 50% de um núcleo de CPU (50.000 microssegundos em 100.000 microssegundos).</li>
<li>O valor <code>100M</code> significa que o cgroup pode usar até 100 MB de memória.</li>
</ol>
<p>No exemplo acima, foram criados os dois arquivos <code>cpu.max</code> e <code>memory.max</code> dentro do diretório <code>/sys/fs/cgroup/meu-namespace/</code>. Esses arquivos são usados para definir os limites de CPU e memória do cgroup. Você pode confirmar o conteúdo dos arquivos usando o comando <code>cat</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>cat<span class="w"> </span>/sys/fs/cgroup/meu-namespace/cpu.max
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>cat<span class="w"> </span>/sys/fs/cgroup/meu-namespace/memory.max
</span></code></pre></div>
<p>Agora que temos o <code>cgroup</code> criado e os limites definidos, precisamos associar o processo bash que criamos anteriormente a esse cgroup. Para isso, precisamos do PID do processo bash que está rodando no namespace. Vamos supor que o PID do bash seja <code>12345</code>. Para associar esse processo ao cgroup <code>meu-namespace</code>, precisamos adicionar o PID do processo ao arquivo <code>cgroup.procs</code> dentro do diretório do cgroup. Para isso, você pode usar o seguinte comando:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nb">echo</span><span class="w"> </span><span class="m">12345</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/sys/fs/cgroup/meu-namespace/cgroup.procs<span class="w"> </span><span class="c1"># (1)</span>
</span></code></pre></div>
<ol>
<li>Substitua <code>12345</code> pelo PID do processo bash que você encontrou anteriormente.</li>
</ol>
<p>Agora, o processo bash e todos os seus filhos estarão associados ao cgroup <code>meu-namespace</code>, e estarão limitados pelos recursos definidos nos arquivos <code>cpu.max</code> e <code>memory.max</code>.</p>
<h3 id="fazendo-um-teste-de-stress">Fazendo um teste de stress<a class="headerlink" href="#fazendo-um-teste-de-stress" title="Permanent link">&para;</a></h3>
<p>O Linux fornece uma ferramenta chamada <code>stress</code> que pode ser usada para gerar carga em CPU, memória e disco. Essa ferramenta é útil para testar os limites de recursos definidos em um cgroup.</p>
<p>Vamos considerar o comando abaixo:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>stress<span class="w"> </span>--cpu<span class="w"> </span><span class="m">2</span><span class="w"> </span>--vm<span class="w"> </span><span class="m">1</span><span class="w"> </span>--vm-bytes<span class="w"> </span>80M<span class="w"> </span>--timeout<span class="w"> </span><span class="m">30</span>
</span></code></pre></div>
<p>Esse comando faz o seguinte:</p>
<ul>
<li><code>--cpu 2</code>: Cria dois processos que consomem CPU.</li>
<li><code>--vm 1</code>: Cria um processo que consome memória.</li>
<li><code>--vm-bytes 80M</code>: O processo de memória consome 80 MB de memória.</li>
<li>'--timeout 30': O comando será executado por 30 segundos.</li>
</ul>
<p>Como a gente pode ver, o comando <code>stress</code> vai tentar consumir 80 MB de memória e 2 núcleos de CPU. No entanto, como definimos um limite de 100 MB de memória e 50% de CPU no cgroup, o comando <code>stress</code> deve ser limitado a esses valores. Por outro lado, se o comando for executado fora do cgroup, ele não terá esses limites e poderá consumir mais recursos do que o esperado.</p>
<p>Para que possamos verificar os limites que foram impostos pelo cgroup, é possível analisar os registros do arquivo <code>cpu.stat</code> do cgroup. Esse arquivo contém informações sobre o uso de CPU e o número de vezes que o cgroup foi limitado (throttled).</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>cat<span class="w"> </span>/sys/fs/cgroup/meu-namespace/cpu.stat
</span></code></pre></div>
<p>O arquivo <code>cpu.stat</code> contém, entre outras, as seguintes informações:</p>
<ul>
<li><code>usage_usec</code>: Tempo total de CPU usado pelo cgroup (em microssegundos).</li>
<li><code>nr_throttled</code>: Quantas vezes o cgroup foi limitado (throttled).</li>
<li><code>throttled_usec</code>: Tempo total durante o qual o cgroup foi limitado (em microssegundos).</li>
</ul>
<p>Agora, podemos executar o comando <code>stress</code> dentro do cgroup e monitorar o arquivo <code>cpu.stat</code> para verificar se os limites estão funcionando corretamente.</p>
<div class="admonition note">
<p class="admonition-title">Importante</p>
<ol>
<li>
<p>Crie um novo cgroup para cada teste, para garantir que não haja valores acumulados no <code>cpu.stat</code> de execuções anteriores</p>
</li>
<li>
<p>Remova o cgroup após o teste e o encerramento do namespace:</p>
</li>
</ol>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>sudo<span class="w"> </span>rmdir<span class="w"> </span>/sys/fs/cgroup/mycontainer
</span></code></pre></div>
</div>
<!-- --8<-- "docs/ci/criando-projeto.md"
## Criação de uma imagem Docker

Para criar uma imagem Docker, é necessário criar um arquivo chamado `Dockerfile` na raiz do projeto. O `Dockerfile` é um arquivo de configuração que define como a imagem Docker será construída, incluindo as dependências, comandos e configurações necessárias para executar a aplicação.

Aqui está um exemplo de `Dockerfile` para um projeto Python simples:

<div class="language-Dockerfile highlight"><span class="filename">Dockerfile</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.13-slim</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">COPY</span><span class="w"> </span>requirements.txt<span class="w"> </span>requirements.txt
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">COPY</span><span class="w"> </span>app.py<span class="w"> </span>app.py
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app.py&quot;</span><span class="p">]</span>
</span></code></pre></div>

No arquivo criado, temos as seguintes instruções:

- `FROM python:3.13-slim`: Define a imagem base a ser utilizada, neste caso, uma imagem Python 3.13 slim.
- `WORKDIR /app`: Define o diretório de trabalho dentro da imagem.
- `COPY requirements.txt requirements.txt`: Copia o arquivo `requirements.txt` para o diretório de trabalho.
- `RUN pip install -r requirements.txt`: Instala as dependências do projeto.
- `COPY app.py app.py`: Copia o arquivo `app.py` para o diretório de trabalho.
- `CMD ["python", "app.py"]`: Define o comando a ser executado quando o contêiner for iniciado.

Note que não rodamos o comando `pytest` dentro do contêiner, pois os testes unitários devem ser executados antes de construir a imagem Docker. Para isso, podemos configurar um job no GitHub Actions para executar os testes antes de construir a imagem.

### Testando a imagem Docker localmente

Para testar a imagem Docker localmente, você pode executar os seguintes comandos:

- [x] Construir a imagem:

<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>ci-sum-python<span class="w"> </span>.
</span></code></pre></div>

- [x] Executar o contêiner:

<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>ci-sum-python
</span></code></pre></div>

O comando `docker build` cria uma imagem Docker com o nome `ci-sum-python` a partir do `Dockerfile` presente no diretório atual. Em seguida, o comando `docker run` inicia um contêiner a partir da imagem criada, executando o arquivo `app.py` e exibindo a saída no terminal.

No caso do nosso exemplo, o arquivo `app.py` simplesmente soma dois números e imprime o resultado. Ao executar o contêiner, você deve ver a saída correspondente à soma dos números.

## Configuração do GitHub Actions

O GitHub Actions permite a criação de pipelines de CI/CD diretamente no repositório, facilitando a automação de tarefas como testes, compilação, análise de código e implantação. Para configurar o GitHub Actions, crie um arquivo chamado `.github/workflows/ci.yml` na raiz do projeto com o seguinte conteúdo:

<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ci-python</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">push</span><span class="p p-Indicator">]</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="nt">jobs</span><span class="p">:</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">  </span><span class="nt">check-application</span><span class="p">:</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v5</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">        </span><span class="nt">with</span><span class="p">:</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">          </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.13&#39;</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">          </span><span class="nt">cache</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pip&#39;</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip install -r requirements.txt</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pytest</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up QEMU</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/setup-qemu-action@v1</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Docker Buildx</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/setup-buildx-action@v1</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker_build</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/build-push-action@v2</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="w">        </span><span class="nt">with</span><span class="p">:</span>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="w">          </span><span class="nt">push</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span></code></pre></div>

Neste arquivo de configuração, definimos um job chamado `check-application` que executa as seguintes etapas:

1. `actions/checkout@v4`: Faz o checkout do código fonte do repositório.
2. `actions/setup-python@v5`: Configura o ambiente Python com a versão 3.13 e o cache do `pip`.
3. `pip install -r requirements.txt`: Instala as dependências do projeto.
4. `pytest`: Executa os testes unitários do projeto.
5. `docker/setup-qemu-action@v1`: Configura o QEMU para execução de imagens multiplataforma.
6. `docker/setup-buildx-action@v1`: Configura o Buildx para construção de imagens Docker.
7. `docker/build-push-action@v2`: Constrói a imagem Docker a partir do `Dockerfile`.

Note que o job `check-application` é acionado sempre que ocorre um push no repositório. Você pode personalizar as etapas de acordo com as necessidades do seu projeto, adicionando mais comandos, testes e ações específicas.

Também, na última etapa, foi configurada a opção `push` como `false`, o que significa que a imagem Docker será construída, mas não será enviada para um registro de contêiner. Você pode alterar essa opção para `true` e adicionar as credenciais necessárias para fazer o push da imagem para um registro de contêiner. Nesta etapa, estamos apenas construindo a imagem para fins de demonstração.

### Executando o GitHub Actions

Para executar o GitHub Actions, faça um push das alterações no arquivo `.github/workflows/ci.yml` para o repositório remoto. Após o push, o GitHub Actions será acionado automaticamente e você poderá visualizar o status da execução na aba "Actions" do repositório.

--8<-- "docs/ci/configurando-deploy-dockerhub.md" -->












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Voltar para o topo
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Rodapé" >
        
          
          <a href="../ci/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Integração Contínua">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Anterior
              </span>
              <div class="md-ellipsis">
                Integração Contínua
              </div>
            </div>
          </a>
        
        
          
          <a href="../docker/" class="md-footer__link md-footer__link--next" aria-label="Próximo: Docker">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Próximo
              </span>
              <div class="md-ellipsis">
                Docker
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Eduardo da Silva
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.code.select", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant.progress", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "search.result.more.one": "mais 1 nesta p\u00e1gina", "search.result.more.other": "# mais nesta p\u00e1gina", "search.result.none": "Nenhum documento encontrado", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Digite para iniciar a busca", "search.result.term.missing": "Ausente", "select.version": "Selecione a vers\u00e3o"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>